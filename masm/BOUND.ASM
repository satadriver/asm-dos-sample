.386
DATA SEGMENT PARA USE16
NUMGROUP DW 100H,200H
DATA ENDS

CODE SEGMENT PARA USE16
ASSUME CS:CODE
START:
CLI
MOV AL,0FFH
OUT 21H,AL
OUT 0A1H,AL

PUSH DS
MOV AX,0
PUSH AX

MOV ES,AX
MOV DI,14h
STOSW

MOV AX,2000H
STOSW

MOV AX,CODE
MOV DS,AX
MOV SI,OFFSET INT5PROC
MOV CX,INT5LEN
MOV AX,2000H
MOV ES,AX
MOV DI,0
REP MOVSB

MOV AL,0
OUT 21H,AL
OUT 0A1H,AL
STI
MOV AX,DATA
MOV DS,AX
MOV BX,300H
BOUND BX,DWORD PTR DS:[NUMGROUP]


RETF




INT5PROC :
STI
PUSH AX
PUSH CX
PUSH SI
PUSH DI
PUSH ES
PUSH DS
JMP SHOWMESSAGE
INT5MESSAGE DB 'BOUND OVERFLOW!!!STRIKE ANY KEY TO CONTINUE...'
INT5MESSAGELEN=$-INT5MESSAGE

SHOWMESSAGE:
MOV SI,OFFSET INT5MESSAGE
MOV DI,OFFSET INT5PROC
SUB SI,DI
MOV AX,0B800H
MOV ES,AX
MOV AX,2000H
MOV DS,AX
MOV DI,200H
MOV CX,INT5MESSAGELEN
MOV AH,21H
L0:
LODSB
STOSW
LOOP L0
POP DS
POP ES
POP DI
POP SI
POP CX
POP AX

;pop ax
;add ax,2
;push ax

IRET
INT5LEN=$-INT5PROC

CODE ENDS
END START
